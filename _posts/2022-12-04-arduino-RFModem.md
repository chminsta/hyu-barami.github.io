---
title: RF 통신 모듈 설계
author: Han Sangho
date: 2022-12-04 01:30:00 +0900
categories: [Exhibition,2022년]
tags: [post,hansangho]     
---

------------------------------------------
# 아두이노를 이용한 RF 통신 모듈 설계

## 작품 제작 동기
무선 통신은 전자 공학에 있어서 필수 요소 중 하나로, 현대 사회에서는 그 중요성이 매우 커졌습니다. 무선 통신은 RF 송수신기와 RF 믹서, 증폭기 등 다양한 처리부로 구성괴며 수백 kHz부터 수십 GHz에 이르는 다양한 영역으로 구성됩니다.

본 작품에서는 아두이노를 이용해서 간단한 RF 송수신기를 직접 만들어보고, 이를 만드는 과정을 통해서 송수신기 주변 회로 설계, 구조 탐구, 제어를 간접적으로 경험해보고자 했습니다. 이번 작품에는 FM, 이동통신 등에서 널리 사용되는 Sub-Ghz대역을 지원하고 송수신기, 제어기를 모두 내장하고 있는 Si4463 칩셋을 이용해 RF 통신모듈을 설계 및 제작하면서 간단한 회로 설계, 아트웍, SMT 등을 직접 진행하며 전자공학 전반의 이해를 키워보려는 것이 목적입니다.


------------------------------------------
## 작품의 이론 및 구현 알고리즘

### Si4463칩
Si4463 칩셋은 PLL, 수신부(LNA), 송신부(PA), 변복조 및 제어기(MODEM), 전원부를 하나의 칩 안에 내장하고 있습니다. 다만 LNA와 PA의 매칭을 위한 LC 회로 및 PLL에 클럭을 제공하기 위한 크리스탈을 위한 회로를 설계해야 합니다.


### CLE 매칭
CLE 매칭의 목적은 10dBm 이상의 RF 출력 전력을 얻기 위해서 사용했습니다. 또한 Drain Voltage가 8V가 넘지 않도록 제한하고, 출력 전력의 효율성을 높이고자 사용합니다. Si4463 칩셋에는 여러가지의 레이아웃 구성 유형이 존재하는데, 그 중 이번에는 Direct tie 형태를 사용할 것입니다.
이를 사용하는 이유는 레이아웃 구성 유형 중 TX, RX 경로가 직접 연결되어서 송수신부가 동일한 안테나 선로를 공유하기 때문에, 안테나가 하나만 있어도 작동 가능하고, Si4463에 있는 여러 레이아웃 구성 중 가장 간단한 기본 형태이기 때문입니다. 다른 형태는 TX와 RX가 서로 연결되지 않은 고급 유형이고, 이해 및 적용이 어렵기에 목적과 맞지 않는다 생각하여 사용하지 않았습니다.


### 노이즈 억제
<img src="/assets/img/post/2022-12-04-arduino-RFModem/noiseminimize.png" width="90%">

전파의 송수신에 있어서 신호의 노이즈를 최대한 억제하고자 Via Curtain, Ground Metalization, PCB trace impedence 등 여러 기법을 사용하였습니다.

* Via Curtain : GND 금속 가장자리를 여러 개의 Via로 둘러 쌈으로서, 전파가 회로 외부의 의한 영향을 최소화 하였습니다.
* Ground Metalization : 금속의 겉면을 GND로 코팅함으로서, 역시 회로 외부의 전파에 의한 영향을 최소화 하였습니다.
* PCB Trace Impedance : 신호 경로의 모든 저항과 리액턴스 값의 합계를 조정하여서, 저항이나 리액턴스에 의한 전파나 신호의 왜곡을 최소화 하고자 사용하였습니다.

------------------------------------------
### 작품 제작 과정 
<img src="/assets/img/post/2022-12-04-arduino-RFModem/DirectTie.png" width="90%">

여러 레이아웃 구성 유형 중에서, 우리가 사용하고자 하는 조건에 맞고, UHF에서 가장 많이 사용되었고, 면허가 필요 없는 대역으로 434MHz를 선정하였습니다. 이 때 사용하는 RF의 레이아웃과 구성 유형은 위 회로와 같습니다.

이제 이 조건에 맞게 PN과 LNA 매칭 값을 설정하고, EasyEda 툴을 이용하여 회로를 설계한 후, 이를 바탕으로 PCB 아트워크를 진행하였습니다.

<img src="/assets/img/post/2022-12-04-arduino-PCBartwork.png" width="90%">

PCB 아트워크를 진행 한 뒤, 이를 JLCPCB를 통해서 발주하였고, 이후 마더보드와 도터 보드를 납땜으로 연결하였습니다. 그러나 이후 시간 부족등의 문제로 아두이노를 통해 직접 RF통신을 진행하지는 못하였습니다. 

------------------------------------------
### 작품 결과 및 개선점

* 본래 목표인 PHY 상위 계층을 구현하는 것이 목표이지만, 이를 진행하지 못한 것과 아트웍의 품질이 부족하고, 수치적인 검증이 되지 않았다는 점이 아쉽습니다.

* 그러나 또 다른 목표였던 무선 통신 구현 과정에서 직접 무선 통신 회로를 구현하고, RF통신의 원리에 대해서 공부하였으며, 직접 PCB 아트워크를 직접 구현하는 등 전자공학 전반에 대한 이해를 키운다는 점은 달성했다고 생각합니다.

* Si4463을 이용해 일종의 무선 UART PHY를 구현함으로서 추후 상위 계층을 구현하여 메시 네트워크 등의 다양한 후속 연구가 기대됩니다.




